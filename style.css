/* =========================
   style.css — Crystal Glass (soft-rounded)
   Default: Light theme (pink -> blue)
   ========================= */

/* ---------- Reset ---------- */
* { box-sizing: border-box; margin:0; padding:0; -webkit-tap-highlight-color: transparent; }
html,body { height:100%; width:100%; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

/* ---------- Utility ---------- */
.hidden { display:none !important; }
.visible { display:flex !important; }
.screen { position:fixed; inset:0; display:none; align-items:center; justify-content:center; padding:18px; }

/* ---------- THEME BACKGROUNDS ---------- */
/* Light theme gradient (default) */
.theme-light { --bg-a: #ffd6e8; --bg-b: #cde8ff; --glass-fg: rgba(255,255,255,0.55); --glass-border: rgba(255,255,255,0.6); --text-strong: #0b1020; --muted: rgba(11,16,32,0.65); --accent: #ff6ab3; }

/* Dark theme gradient */
.theme-dark { --bg-a: #3a0b3a; --bg-b: #082747; --glass-fg: rgba(12,12,15,0.45); --glass-border: rgba(255,255,255,0.08); --text-strong: #f6f7fb; --muted: rgba(246,247,251,0.75); --accent: #ff77d1; }

/* Default container root: theme class applied on body via JS (body.theme-light or body.theme-dark) */
body { min-height:100vh; min-width:100vw; }

/* The main full-screen gradient background — controlled by theme classes */
body.theme-light { background: linear-gradient(130deg, var(--bg-a), var(--bg-b)); color: var(--text-strong); }
body.theme-dark { background: linear-gradient(130deg, var(--bg-b), var(--bg-a)); color: var(--text-strong); }

/* ---------- Top stats (top-right) ---------- */
.top-stats {
  position: fixed;
  right: 14px;
  top: 12px;
  text-align: right;
  z-index: 120;
  font-weight: 700;
  color: var(--text-strong);
  backdrop-filter: blur(6px);
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  border-radius: 10px;
  padding: 8px 12px;
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 6px 24px rgba(11,16,32,0.18);
  font-size: 14px;
}

/* ---------- Loader overlay ---------- */
.overlay { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:999; }
.loader-card {
  width: min(420px, 92vw);
  padding: 18px;
  border-radius: 12px;
  background: rgba(255,255,255,0.65);
  box-shadow: 0 10px 40px rgba(11,16,32,0.2);
  text-align:center;
  backdrop-filter: blur(10px);
}
.loader-title { font-weight:800; color: #111; margin-bottom:12px; font-size:18px; }
.loader-bar { width: 100%; height:12px; background: rgba(0,0,0,0.06); border-radius:8px; overflow:hidden; margin:10px 0; }
.loader-progress { height:100%; width:0%; background: linear-gradient(90deg,#ff8bd1,#7dd3ff); border-radius:8px; transition: width .28s ease; }
.loader-hint { font-size:13px; color:#222; margin-top:6px; }

/* ---------- Generic glass menu frame ---------- */
.menu-frame {
  width: min(760px, 94vw);
  max-width:760px;
  padding: 22px;
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.48), rgba(255,255,255,0.22));
  border: 1px solid rgba(255,255,255,0.6);
  box-shadow: 0 18px 60px rgba(11,16,32,0.25);
  backdrop-filter: blur(12px) saturate(1.02);
  display:flex; flex-direction:column; align-items:center; gap:12px;
}

/* game title floating above the menu box */
.game-title {
  font-size: 28px;
  font-weight: 900;
  letter-spacing: 1px;
  color: var(--text-strong);
  text-shadow: 0 3px 14px rgba(0,0,0,0.12);
  margin-bottom: 6px;
}

/* small box that contains the menu buttons */
.menu-box {
  width:100%;
  max-width:420px;
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:center;
  padding: 10px 8px 18px 8px;
}

/* ---------- Buttons ---------- */
.btn {
  -webkit-appearance:none;
  appearance:none;
  border: none;
  cursor: pointer;
  border-radius: 12px;
  padding: 12px 16px;
  font-weight:800;
  font-size: 16px;
  min-width: 160px;
  background: linear-gradient(90deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85));
  color: var(--text-strong);
  box-shadow: 0 8px 22px rgba(11,16,32,0.14);
  transition: transform .08s ease, box-shadow .12s ease, opacity .12s ease;
}
.btn.small { padding:8px 10px; min-width:80px; font-size:14px; border-radius:10px; }
.btn.large { padding:14px 20px; font-size:18px; min-width:220px; border-radius:12px; }
.btn.primary {
  background: linear-gradient(90deg, var(--accent), #7dd3ff);
  color: white;
  box-shadow: 0 12px 40px rgba(125,211,255,0.14);
}
.btn:hover { transform: translateY(-3px); }
.btn:active { transform: translateY(0px) scale(.995); }

/* ---------- Box with back button (mode select / pages) ---------- */
.box-with-back {
  width: min(820px, 94vw);
  display:flex;
  align-items:flex-start;
  gap:14px;
  padding: 12px;
}
.back { position: absolute; left:16px; top:18px; background: rgba(255,255,255,0.85); color: var(--text-strong); box-shadow: 0 6px 18px rgba(11,16,32,0.12); border-radius: 10px; padding:8px 12px; font-weight:800; }
.section-box {
  margin: 20px auto;
  width: 100%;
  max-width:620px;
  padding: 18px;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.45), rgba(255,255,255,0.18));
  border: 1px solid rgba(255,255,255,0.5);
  box-shadow: 0 12px 36px rgba(11,16,32,0.12);
  backdrop-filter: blur(10px);
  display:flex; flex-direction:column; gap:14px; align-items:center;
}

/* section title */
.section-title {
  font-size:20px;
  font-weight:900;
  color: var(--text-strong);
  letter-spacing: .6px;
}

/* vertical button list */
.vertical-buttons { display:flex; flex-direction:column; gap:10px; width:100%; align-items:center; }

/* season row */
.season-row { display:flex; gap:10px; justify-content:center; width:100%; flex-wrap:wrap; }

/* season style */
.btn.season { min-width:110px; padding:10px 14px; border-radius:12px; background: linear-gradient(90deg, rgba(255,255,255,0.9), rgba(255,255,255,0.8)); }

/* ---------- Level grid (100 buttons) ---------- */
.level-grid {
  width:100%;
  max-height: 54vh;
  overflow:auto;
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(64px, 1fr));
  gap: 10px;
  padding: 8px;
  margin-top:6px;
}

/* level button: dark style for clarity */
.level-grid .levelBtn {
  background: #222;
  color: #fff;
  font-weight:800;
  border-radius:12px;
  padding:10px;
  font-size:16px;
  border: 2px solid rgba(255,255,255,0.06);
  transition: transform .08s ease;
}
.level-grid .levelBtn.unlocked { background: linear-gradient(90deg,#1f2937,#111827); }
.level-grid .levelBtn.locked { background:#4b5563;color:#cbd5e1; opacity: 0.6; cursor:not-allowed; }

/* ---------- Garage row ---------- */
.garage-row {
  width:100%;
  display:flex;
  gap:12px;
  overflow:auto;
  padding:10px;
}
.carItem {
  min-width:150px;
  background: linear-gradient(180deg, rgba(255,255,255,0.45), rgba(255,255,255,0.16));
  border-radius:12px;
  padding:10px;
  border: 1px solid rgba(255,255,255,0.45);
  display:flex; flex-direction:column; gap:8px; align-items:center; justify-content:center;
}
.carImg { width:110px; height:auto; border-radius:8px; object-fit:contain; box-shadow: 0 8px 18px rgba(11,16,32,0.12); }

/* ---------- Game screen & canvas ---------- */
.game-screen { align-items: stretch; justify-content:center; }
#gameCanvas {
  width: min(1100px, 94vw);
  height: min(720px, 74vh);
  display:block;
  margin: 10px auto;
  border-radius: 12px;
  background: transparent;
  box-shadow: 0 30px 80px rgba(11,16,32,0.35);
  border: 1px solid rgba(255,255,255,0.07);
}

/* HUD */
.hud-left {
  position: absolute;
  left: 18px;
  top: 12px;
  display:flex;
  flex-direction:column;
  gap:8px;
  z-index:120;
}
.hud-item {
  background: rgba(255,255,255,0.36);
  padding:8px 12px;
  border-radius:10px;
  font-weight:800;
  color: var(--text-strong);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,0.08);
}

/* pause button (top-right inside game) */
.btn.pause {
  position: absolute;
  right: 18px;
  top: 12px;
  z-index:120;
  padding:8px 12px;
  border-radius:10px;
  font-weight:900;
}

/* ---------- Popup / Pause overlay ---------- */
.overlay.hidden { display:none; }
.overlay { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:999; background: rgba(6,8,12,0.46); backdrop-filter: blur(6px); }
.popup-card {
  width: min(420px, 92vw);
  padding: 18px;
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.78));
  border: 1px solid rgba(255,255,255,0.6);
  text-align:center;
  box-shadow: 0 20px 60px rgba(11,16,32,0.3);
}
.popup-text { font-weight:900; font-size:20px; color:var(--text-strong); margin-bottom:12px; }
.popup-actions { display:flex; gap:10px; justify-content:center; }

/* ---------- Finishing-line visuals helper (canvas draws it), but provide a small CSS marker for consistency ---------- */
.finish-line-indicator {
  width: 100%;
  height: 28px;
  background: repeating-linear-gradient(90deg, #fff 0 6px, #000 6px 12px);
  border-radius: 4px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.18);
}

/* ---------- Responsive tweaks ---------- */
@media (max-width:900px){
  .menu-frame { padding:14px; max-width:640px; }
  .game-title { font-size:22px; }
  .btn { font-size:15px; padding:10px 14px; min-width:140px; }
  #gameCanvas { height: min(520px, 64vh); }
  .level-grid { grid-template-columns: repeat(auto-fill, minmax(54px, 1fr)); }
  .carImg { width: 84px; }
}
@media (max-width:480px){
  .game-title { font-size:18px; }
  .btn { font-size:14px; padding:8px 12px; min-width:120px; border-radius:10px; }
  .menu-box { gap:8px; }
  .top-stats { right:8px; top:6px; font-size:13px; padding:6px 8px; border-radius:8px; }
  #gameCanvas { height: min(420px, 58vh); width: 96vw; }
}

/* ---------- small accessibility contrast helpers ---------- */
.level-grid .levelBtn:focus,
.btn:focus,
.carBtn:focus { outline: 3px solid rgba(125,211,255,0.18); outline-offset:3px; }

/* ---------- End of file ---------- */
